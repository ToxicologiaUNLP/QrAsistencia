<!DOCTYPE html>
<html lang="es-AR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laboratorio Central</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #61adc1;
        margin: 0;
        padding: 0;
    }
    header {
        text-align: center;
        padding: 30px 10px;
        color: #fff;
    }
    header img {
        width: 125%; /* 25% m√°s grande */
        max-width: 180px;
        display: block;
        margin: 0 auto 10px auto;
    }
    header h1 {
        margin: 10px 0 5px 0;
        font-size: 2em;
    }
    header h2 {
        margin: 0;
        font-size: 1.2em;
        font-weight: normal;
    }
    main {
        max-width: 1000px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
    }
    #search {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border: 2px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        margin-bottom: 20px;
    }
    #results {
        margin-bottom: 20px;
    }
    .result-item {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
    }
    .result-item:hover {
        background-color: #f1f1f1;
    }
    #details {
        display: none;
        overflow-x: auto;
    }
    #details table {
        border-collapse: collapse;
        width: 100%;
    }
    #details td, #details th {
        border: 1px solid #ddd;
        padding: 8px;
        vertical-align: top;
    }
    #details th {
        background-color: #f2f2f2;
        text-align: left;
    }
</style>
</head>
<body>

<header>
    <img src="logolab.png" alt="Logo Laboratorio">
    <h1>Laboratorio Central</h1>
    <h2>Valores de referencia y condiciones de toma de muestra</h2>
</header>

<main>
    <input type="text" id="search" placeholder="Escribe el nombre del estudio..." oninput="searchStudies()">
    <div id="results"></div>
    <div id="details">
        <h2>Detalles del Estudio</h2>
        <table id="study-details"></table>
    </div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT_1_DpeDPmqZOjSmtIGeb8Ri-yuGtWz7sWwwFMdyWssacb5RTdJkpu_7OBPi_yPw/pub?output=csv';
let studies = [];

// Cargar CSV con PapaParse
Papa.parse(csvUrl, {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(results) {
        studies = results.data;
        console.log("CSV cargado:", studies);
    }
});

// Buscar estudios mientras se escribe
function searchStudies() {
    const query = document.getElementById('search').value.toLowerCase();
    const filtered = studies.filter(study => study['ESTUDIOS'] && study['ESTUDIOS'].toLowerCase().includes(query));
    displayResults(filtered);
}

// Mostrar resultados
function displayResults(filtered) {
    const resultsContainer = document.getElementById('results');
    resultsContainer.innerHTML = '';
    filtered.forEach(study => {
        const div = document.createElement('div');
        div.classList.add('result-item');
        div.textContent = study['ESTUDIOS'];
        div.onclick = () => showDetails(study);
        resultsContainer.appendChild(div);
    });
}

// Mostrar detalles de la fila seleccionada
function showDetails(study) {
    const details = document.getElementById('details');
    const table = document.getElementById('study-details');
    table.innerHTML = '';

    const headerRow = table.insertRow();
    for(const key in study) {
        const th = document.createElement('th');
        th.textContent = key;
        headerRow.appendChild(th);
    }

    const dataRow = table.insertRow();
    for(const key in study) {
        const td = document.createElement('td');
        td.textContent = study[key];
        dataRow.appendChild(td);
    }

    details.style.display = 'block';
}
</script>

</body>
</html>

